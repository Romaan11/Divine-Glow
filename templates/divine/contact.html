{% extends 'divine/base.html' %}

{% block content %}
<!-- Header Start -->
<div class="container-fluid bg-breadcrumb py-5">
    <div class="container text-center py-5">
        <h1 class="text-white display-3 mb-4">Contact Us</h1>
        <ol class="breadcrumb justify-content-center mb-0">
            <li class="breadcrumb-item"><a href="/">Home</a></li>
            <li class="breadcrumb-item active text-white">Contact</li>
        </ol>    
    </div>
</div>
<!-- Header End -->


<!-- Contact Start -->
<div class="container-fluid contact-page contact py-5" style="background: var(--bs-primary);">
    <div class="container pt-5">
        <div class="row g-4 align-items-center">
            <div class="col-lg-6">
                <div class="text-center">
                    <h1 class="display-3 text-white mb-4">Contact Us</h1>
                    <p class="text-white fs-4"><b style="font-size: 28px;">We’d love to hear from you.</b><br> Get in touch with us and we’ll respond as soon as possible.</p>
                </div>
            </div>

            <!-- Popup Message -->
            <div id="popupMessage" class="popup-message">
                <div id="popupContent" class="popup-content"></div>
            </div>

            <div class="col-lg-6">
                <div class="contact-form rounded p-5">
                    <form method="POST" id="contactForm" novalidate>
                        {% csrf_token %}
                        <h1 class="display-6 mb-4">Do You have Any Questions?</h1>
                        <div class="row gx-4 gy-3">
                            <div class="col-xl-6">
                                <input type="text" name="name" id="name" value="{{ form.name.value|default:'' }}" class="form-control bg-white border-0 py-3 px-4" placeholder="Your Full Name">
                            </div>
                            <div class="col-xl-6">
                                <input type="email" name="email" id="email" value="{{ form.email.value|default:'' }}" class="form-control bg-white border-0 py-3 px-4" placeholder="Your Email">
                            </div>
                            <div class="col-xl-6">
                                <input type="text" name="phone" id="phone" value="{{ form.phone.value|default:'' }}" class="form-control bg-white border-0 py-3 px-4" placeholder="Your Phone">
                            </div>
                            <div class="col-xl-6">
                                <input type="text" name="subject" id="subject" value="{{ form.subject.value|default:'' }}" class="form-control bg-white border-0 py-3 px-4" placeholder="Subject">
                            </div>
                            <div class="col-12">
                                <textarea name="message" id="message" class="form-control bg-white border-0 py-3 px-4" rows="4" placeholder="Your Message">{{ form.message.value|default:'' }}</textarea>
                            </div>
                            <div class="col-12">
                                <button class="btn btn-primary btn-primary-outline-0 w-100 py-3 px-5" type="submit">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- Contact End -->

{% if messages %}
    {% for message in messages %}
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                var popupMessage = document.getElementById('popupMessage');
                var popupContent = document.getElementById('popupContent');
                popupContent.textContent = "{{ message }}";

                // Set the background color based on message type
                if ("{{ message.tags }}" === "success") {
                    popupMessage.style.backgroundColor = "green";
                } else if ("{{ message.tags }}" === "error") {
                    popupMessage.style.backgroundColor = "red";
                }

                popupMessage.style.display = "block";
                setTimeout(function() {
                    popupMessage.style.display = "none";
                }, 4000);
            });
        </script>
    {% endfor %}
{% endif %}

<script>
    // Form validation function
    document.getElementById('contactForm').addEventListener('submit', function(event) {
        var isValid = true;
        var errorMessages = [];
        
        // Check if all fields are filled
        var fields = ['name', 'email', 'phone', 'subject', 'message'];
        fields.forEach(function(field) {
            var input = document.getElementById(field);
            if (!input.value.trim()) {
                isValid = false;
                errorMessages.push(field.charAt(0).toUpperCase() + field.slice(1) + " is required.");
                input.classList.add('is-invalid');
            } else {
                input.classList.remove('is-invalid');
            }
        });

        // Phone number validation (starts with 98 and is exactly 10 digits)
        var phone = document.getElementById('phone').value;
        if (phone && (!phone.startsWith('98') || phone.length !== 10)) {
            isValid = false;
            errorMessages.push('Phone number must start with "98" and be exactly 10 digits long.');
            document.getElementById('phone').classList.add('is-invalid');
        }

        // Display error messages if form is invalid
        if (!isValid) {
            event.preventDefault();
            var popupMessage = document.getElementById('popupMessage');
            var popupContent = document.getElementById('popupContent');
            popupContent.textContent = errorMessages.join(' ');
            popupMessage.style.backgroundColor = "red"; // Red for error messages
            popupMessage.style.display = "block";
            setTimeout(function() {
                popupMessage.style.display = "none";
            }, 4000);
        }
    });
</script>

{% endblock content %}
